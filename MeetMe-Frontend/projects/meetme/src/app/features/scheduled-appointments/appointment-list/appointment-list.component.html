<!-- appointment-list.component.html -->

<h1>Appointment List</h1>
<ng-container *ngFor="let appointmentsByDate of appointmentsPaginationResult?.result; let i = index;">
  <div>
  <h2>{{appointmentsByDate.date}}</h2>
    <ul>
      <li *ngFor="let appointment of appointmentsByDate.appointments; let i = index;">
        <div class="appointment-header" (click)="toggleDetails(appointment)">
          <span class="date-time">{{appointment.appointmentDateTime}}</span>
          <span class="event-type">{{appointment.eventTypeTitle}}</span>
          <span class="invitee-name">{{appointment.inviteeName}}</span>
          <span class="invitee-name">{{appointment.status}}</span>
          <span class="toggle-icon"
            [ngClass]="{'expanded': appointment.isExpanded, 'collapsed': !appointment.isExpanded}">+</span>
        </div>
        <div class="appointment-details"
          [ngClass]="{'expanded': appointment.isExpanded,'collapsed': !appointment.isExpanded}">
          <label>Cancellation Reason</label>
          <textarea [(ngModel)]="appointment.cancellationReason" placeholder="Reason"></textarea>
          <div class="actions">
            <button *ngIf="appointment.status==='active'" class="cancel-button"
              (click)="cancelAppointment(appointment)">Cancel</button>
            <button *ngIf="appointment.status==='active'" class="reschedule-button"
              (click)="rescheduleAppointment(appointment.id)">Reschedule</button>
          </div>
        </div>
      </li>
    </ul>
  </div>
</ng-container>